<!DOCTYPE html>
<html>
  <head>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.1-rc.0/web3.min.js"
      integrity="sha512-Ui9NE+/XdhwxssTrWetwWgpwpZJCLgTpB2dgkq+xe3O7lmZEJe+2rw3OT3YbYIUCQWH5dOO8ObLOYmbUVpPBgw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style type="text/css">
      .p {
        text-align: justify;
      }
    </style>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>

  <body>
    <!--Navbar-->

    <div class="navbar-fixed">
      <nav class="green lighten-3">
        <div class="container">
          <div class="nav-wrapper">
            <a href="#!" class="brand-logo"><img src="img/logo2.png" alt="" width="200" height="60" class="d-inline-block align-text-top" /></a>
            <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
              <li><a href="index.html">Beranda</a></li>
              <li><a href="partisipasi.html">Partisipasi</a></li>
              <li><a href="informasi.html">Informasi</a></li>
              <li><a href="produk.html">Produk</a></li>
              <li><a href="tentang.html">Tentang</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
    <!--Sidenav-->
    <ul class="sidenav" id="mobile-nav">
      <li><a href="index.html">Beranda</a></li>
      <li><a href="partisipasi.html">Partisipasi</a></li>
      <li><a href="informasi.html">Informasi</a></li>
      <li><a href="produk.html">Produk</a></li>
      <li><a href="tentang.html">Tentang</a></li>
    </ul>
    <!--Akhir Sidenav-->
    <!--AKhir Navbar-->
    <!--Pendataan-->
    <div class="section">
      <div class="container">
        <h3 class="center">Pendataan Masukan</h3>
        <div class="row">
          <div class="input-field col s6">
            <input value="" id="sampahhariini" type="text" class="validate" />
            <label class="active" for="sampahhariini">Jumlah Sampah</label>
            <button class="waves-effect waves-light btn-small" onclick="connecting()">Koneksi Ke Metamask</button>
            <button class="waves-effect waves-light btn-small" onclick="sampahhariini()"><i class="material-icons right">control_point</i>Input</button>
          </div>
        </div>
      </div>
    </div>

    <!--Akhir Pendataan-->
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="blockchain.js"></script>
    <script>
      const sidenav = document.querySelectorAll('.sidenav');
      M.Sidenav.init(sidenav);
      var hasil;
      function sampahhariini() {
        var sampah = document.getElementById('sampahhariini').value;
        console.log(sampah);

        Swal.fire('data sedang di proses,silahkan konfirmasi ');
        maincontract.methods
          .jumlahsampahhariini(sampah)
          .send({ from: acc })
          .then(function (result) {
            console.log(result);
            hasil = result;
            if (hasil.status) {
              Swal.fire({
                title: 'Data berhasil disimpan',
                icon: 'success',
                html: 'Lihat Detail data , ' + '<a href="https://ropsten.etherscan.io/tx/' + hasil.transactionHash + '" target="_blank">Lihat di blockchain</a> ',
                showCloseButton: true,
              });
            }
            //window.location.replace('http://localhost/materializeV1/informasi.html');
          });
      }
    </script>
  </body>
</html>
